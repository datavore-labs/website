section#header
	aside
		h1.title Data Your Way
		h3.subtitle Better Analytics for Financial Services
		h3.icon-logo-full(title='Datavore')

section#what
	h2 What We Do
	aside
		.card
			.front
				h3
					span.icon-functions  
					| Capture Your Domain Expertise
				.widget ...
			.back
				h3
					span.icon-functions  
				p
					| Our platform classifies and stores data in the way you think about it, capturing context and relationships instead of just rows and columns.
		.card
			.front
				h3
					span.icon-directions  
					| Automate Your Workflows
				.widget ...
			.back
				h3
					span.icon-directions  
				p
					| Capture and repeat multi-step data cleaning and analytical processes across diverse data sources to automate your workflows.
		.card
			.front
				h3
					span.icon-map  
					| Instantly Visualize Relationships
				.widget ...
			.back
				h3
					span.icon-map  
				p
					| Simply select multiple variables from any number of data sources to instantly illustrate graphical relationships and trends.
		.card
			.front
				h3
					span.icon-query_builder  
					| Easy Time Series Analysis
				.widget ...
			.back
				h3
					span.icon-query_builder  
				p
					| Quickly find leading or lagging indicators and key relationships by comparing multi-frequency data sets.

section#get1
	p
	//.button-cta.toggle_signup Get the Demo

section#how
	h2 How We Do It
	aside
		h3
			span.icon-check_box
			| Hassle-Free Roll Out
		p Browser-based solution does not require installation, maintenance or updates.
	aside
		h3
			span.icon-check_box
			| Compliant and Secure
		p
			| Compliance and IT department friendly, all data is stored locally behind existing security measures with no external servers.
	aside
		h3
			span.icon-check_box
			| Business User Friendly
		p
			| No coding is necessary as calculations use familiar formula syntax and queries are built visually.

section#get2
	.button-cta.toggle_signup
		span.icon-logo
		| Get Datavore

#signup.disabled
	.content
		.widget.toggle_signup
			span.icon-close
		h2 Get Datavore
		include ./form.jade
		.thanks.disabled
			aside
				h1
					span.icon-logo  
				h3 Thank you for choosing Datavore.
				// Omar is pleased.
	.shim

// Scripts for everything else
script(type="application/javascript", async="", defer="").
	'use strict';
	function init()
	{
		var i;
		
		// Toggle signup buttons
		var toggleSignupNodes = document.querySelectorAll('.toggle_signup');
		for (i = 0; i < toggleSignupNodes.length; i++)
		{
			toggleSignupNodes[i].addEventListener('click', toggleSignup);
		}

		// Other checkboxes
		var otherCheckboxes = document.querySelectorAll('[value=__other_option__]');
		for (i = 0; i < otherCheckboxes.length; i++)
		{
			var input = document.querySelector('[name="' + otherCheckboxes[i].name + '.other_option_response"]');
			input.addEventListener('input', function()
			{
				var entryName = this.name.split('.').slice(0, 2).join('.');
				var checkbox = document.querySelector('[name="' + entryName + '"][value=__other_option__]')
				if (!this.value)
				{
					checkbox.checked = false;
				}
				else
				{
					checkbox.checked = true;
				}
			});
		}
	};

	function showThanks()
	{
		var form = document.getElementById('get-dv-form');
		var thanks = document.querySelector('#signup .thanks');
		if (thanks)
		{
			thanks.classList.remove('disabled');
			form.classList.add('disabled');
		}
	}

	function toggleSignup()
	{
		var signup = document.getElementById('signup');
		var thanks = document.querySelector('#signup .thanks');
		var isDisabled = signup.classList.contains('disabled');
		if (isDisabled)
		{
			signup.classList.remove('disabled');
			form.classList.remove('disabled');
		}
		else
		{
			var form = document.getElementById('get-dv-form');
			signup.classList.add('disabled');
			thanks.classList.add('disabled');
			form.classList.add('disabled');
			if (form)
			{
				form.reset();
			}
		}
	}

	function ajaxSuccess()
	{
		showThanks();
	}

	function ajaxError()
	{
		// Also thanks on error?
		showThanks();
	}

	function AJAXSubmit(oFormElement)
	{
		if (!oFormElement.action) { return; }

		var oReq = new XMLHttpRequest();
		oReq.onload = ajaxSuccess;
		oReq.onerror = ajaxError;

		oReq.open("post", oFormElement.action);
		oReq.send(new FormData(oFormElement));

		return false;
	}

	init(); // Set up dom callbacks